"use strict";var app=angular.module("ngAlerts",[]).run(["$compile","$rootScope",function(a,b){angular.element(document).find("body").append("<ng-alerts-queue></ng-alerts-queue>")}]);angular.module("ngAlerts").directive("ngAlertsCount",["ngAlertsMngr","ngAlertsEvent",function(a,b){return{templateUrl:"templates/ng-alerts/count.html",link:function(c,d,e){function f(){c.count=a.get().length,c.badge=e.badge,0===c.count&&e.hideEmpty&&(c.count="")}f(),c.$on(b.event("change"),f)}}}]),angular.module("ngAlerts").directive("ngAlertsList",["ngAlertsMngr","ngAlertsEvent",function(a,b){return{templateUrl:"templates/ng-alerts/list.html",link:function(c,d,e){function f(){c.alerts=a.get()}c.remove=function(b){a.remove(b)},c.$on(b.event("change"),f),c.emptyList=e.emptyText||"No messages. Better get active!",f()}}}]),angular.module("ngAlerts").directive("ngAlertsPopover",["$compile","$timeout",function(a,b){return{link:function(b,c,d){function e(a){l.detach()}function f(){var a,b,d=c[0].getBoundingClientRect();"top"===j||"bottom"===j?(a="bottom"===j?d.bottom:d.top+c[0].offsetHeight,b=d.left+c[0].offsetWidth/2-l[0].offsetWidth/2):(a=d.top+c[0].offsetHeight/2-l[0].offsetHeight/2,b="left"===j?d.left-l[0].offsetWidth:d.right+l[0].offsetWidth),l.css({top:a+"px",left:b+"px"})}function g(a){a.stopPropagation(),f()}function h(a){g(a),e(a),m.append(l),f()}function i(){c.off("click",h),m.off("click",e),l.off("click",g),l.remove()}var j=d.position||"top",k=d.emptyText?' empty-text="'+d.emptyText+'"':"",l=a('<div class="ng-alerts-popover popover fade '+j+' in" role="tooltip" style="display: block;"><div class="arrow" style="left: 50%;"></div><div class="popover-content"><ng-alerts-list'+k+"></ng-alerts-list></div></div>")(b),m=angular.element(document).find("body");c.on("click",h),m.on("click",e),l.on("click",g),b.$on("$destroy",i)}}}]),angular.module("ngAlerts").directive("ngAlertsQueue",["ngAlertsMngr","ngAlertsEvent","$timeout",function(a,b,c){return{templateUrl:"templates/ng-alerts/queue.html",link:function(a){function d(b){var c;for(c=0;c<a.alerts.length;c+=1)if(a.alerts[c].id===b)return void a.alerts.splice(c,1)}a.alerts=[],a.$on(b.event("remove"),function(a,b){d(b)}),a.$on(b.event("add"),function(b,e){a.alerts.push(e),c(function(){d(e.id)},3e3)})}}}]),angular.module("ngAlerts").factory("NgAlert",["ngAlertsId",function(a){var b=function(b,c){this.id=b||a.create(),this.msg=c||""};return b}]),angular.module("ngAlerts").factory("ngAlertsId",[function(){var a={};return a.create=function(a){a=a||[];var b;do b=Date.now();while(-1!==a.indexOf(b));return b},a}]),angular.module("ngAlerts").factory("ngAlertsMngr",["ngAlertsEvent","NgAlert","ngAlertsId",function(a,b,c){function d(b,c){a.fire(b,c),a.fire("change",c)}var e=[],f={};return f.get=function(){return angular.copy(e)},f.reset=function(){e=[],d("reset")},f.add=function(a){var f,g=[];for(f=0;f<e.length;f+=1)g.push(e[f].id);f=e.push(new b(c.create(g),a)),d("add",e[f-1])},f.remove=function(a){var b;for(b=0;b<e.length;b+=1)if(e[b].id===a){e.splice(b,1);break}d("remove",a)},f}]),angular.module("ngAlerts").service("ngAlertsEvent",["$rootScope",function(a){this.event=function(a){return"ngAlerts."+a},this.fire=function(b,c){a.$broadcast(this.event(b),c)}}]);