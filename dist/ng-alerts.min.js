"use strict";angular.module("ngAlerts",["ui.bootstrap"]).provider("ngAlerts",function(){this.options={emptyListText:"No messages",queueTimeout:3e3,queueLocation:"bottom right",queue:!0},this.$get=function(){return this}}).run(function(){angular.element(document).find("body").append("<ng-alerts-queue></ng-alerts-queue>")}),angular.module("ngAlerts").directive("ngAlertsCount",["ngAlertsMngr","ngAlertsEvent",function(a,b){return{templateUrl:"template/ng-alerts/count.html",link:function(c,d,e){function f(){c.count=a.get().length,c.badge=e.badge,0===c.count&&e.hideEmpty&&(c.count="")}f(),c.$on(b.event("change"),f)}}}]),angular.module("ngAlerts").directive("ngAlertsList",["ngAlertsMngr","ngAlertsEvent","ngAlerts",function(a,b,c){return{templateUrl:"template/ng-alerts/list.html",link:function(d,e,f){function g(){d.alerts=a.get()}d.remove=function(b,c){c.stopImmediatePropagation(),a.remove(b)},d.$on(b.event("change"),g),d.emptyList=f.emptyText||c.options.emptyListText,g()}}}]),angular.module("ngAlerts").directive("ngAlertsModal",["ngAlertsEvent","$uibModal","$compile","$timeout","$sce",function(a,b,c,d,e){return{restrict:"A",terminal:!0,priority:1e3,link:function(a,d,e){d.attr("ng-click","openModal()"),d.removeAttr("ng-alerts-modal"),a.emptyText=e.emptyText,a.openModal=function(){a.modalInstance=b.open({animation:!0,templateUrl:"template/ng-alerts/sub/modal-list.html",size:e.size||"lg"}),a.modalInstance.result.then(function(){a.modalInstance=null})},c(d)(a)}}}]),angular.module("ngAlerts").directive("ngAlertsPopover",["ngAlertsEvent","$compile","$timeout","$sce",function(a,b,c,d){return{restrict:"A",terminal:!0,priority:1e3,link:function(a,c,d){c.attr("uib-popover-template","templateUrl"),c.attr("popover-is-open","isOpen"),c.removeAttr("ng-alerts-popover"),d.popoverTrigger||c.attr("popover-trigger","outsideClick"),c.attr("popover-class","ng-alerts-popover-list"),a.templateUrl="template/ng-alerts/sub/popover-list.html",a.emptyText=d.emptyText,a.isOpen=!1,a.closePopover=function(){a.isOpen=!1},b(c)(a)}}}]),angular.module("ngAlerts").directive("ngAlertsQueue",["ngAlertsMngr","ngAlertsEvent","$timeout","ngAlerts",function(a,b,c,d){return{templateUrl:"template/ng-alerts/queue.html",link:function(e){function f(a){var b;for(b=0;b<e.alerts.length;b+=1)if(e.alerts[b].id===a)return void e.alerts.splice(b,1)}e.alerts=[],e.location=d.options.queueLocation,e.remove=function(b){a.remove(b)},e.$on(b.event("remove"),function(a,b){f(b)}),e.$on(b.event("add"),function(a,b){d.options.queue&&(e.alerts.push(b),c(function(){f(b.id)},d.options.queueTimeout))})}}}]),angular.module("ngAlerts").factory("NgAlert",["ngAlertsId",function(a){var b=function(b,c,d){this.id=b||a.create(),this.msg=c||"",this.type=d||"warning"};return b}]),angular.module("ngAlerts").factory("ngAlertsId",[function(){var a={};return a.create=function(a){a=a||[];var b;do b=Date.now();while(-1!==a.indexOf(b));return b},a}]),angular.module("ngAlerts").factory("ngAlertsMngr",["ngAlertsEvent","NgAlert","ngAlertsId",function(a,b,c){function d(b,c){a.fire(b,c),a.fire("change",c)}var e=[],f={};return f.get=function(){return angular.copy(e)},f.reset=function(){e=[],d("reset")},f.add=function(a,f){var g,h=[];for(g=0;g<e.length;g+=1)h.push(e[g].id);g=e.push(new b(c.create(h),a,f)),d("add",e[g-1])},f.remove=function(a){var b;for(b=0;b<e.length;b+=1)if(e[b].id===a){e.splice(b,1);break}d("remove",a)},f}]),angular.module("ngAlerts").service("ngAlertsEvent",["$rootScope",function(a){this.event=function(a){return"ngAlerts."+a},this.fire=function(b,c){a.$broadcast(this.event(b),c)}}]),angular.module("ngAlerts").run(["$templateCache",function(a){a.put("template/ng-alerts/count.html","<span ng-class=\"{'badge': badge}\">{{count}}</span>\n"),a.put("template/ng-alerts/list.html",'<div class="ng-alerts-list">\n    <div ng-show="alerts.length > 0">\n        <table class="table table-hover table-condensed">\n            <thead>\n                <tr>\n                    <th colspan="2">Message</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="alert in alerts" class="{{alert.type}}">\n                    <td>\n                        {{alert.msg}}\n                    </td>\n                    <td>\n                        <button ng-click="remove(alert.id, $event)" type="button" class="close" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    <div ng-show="alerts.length === 0">\n        {{emptyList}}\n    </div>\n</div>'),a.put("template/ng-alerts/queue.html",'<div id="ng-alerts-queue" class="{{location}}">\n    <uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="remove(alert.id)">\n        {{alert.msg}}\n    </uib-alert>\n</div>'),a.put("template/ng-alerts/sub/modal-list.html",'<div>\n    <div class="modal-header">\n        <h3 class="modal-title">\n            Notifications\n            <button type="button" ng-click="$dismiss()" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        </h3>\n    </div>\n    <div class="modal-body">\n        <ng-alerts-list empty-text="{{emptyText}}"></ng-alerts-list>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" type="button" ng-click="$dismiss()">Close</button>\n    </div>\n</div>'),a.put("template/ng-alerts/sub/popover-list.html",'<div>\n    <h2 class="popover-title clearfix">\n        <a class="pull-right" ng-click="closePopover()">&times;</a>\n    </h2>\n    <div class="popover-content">\n        <ng-alerts-list empty-text="{{emptyText}}"></ng-alerts-list>\n    </div>\n</div>')}]);